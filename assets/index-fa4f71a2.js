import{d as w,o as b,c as S,a as _,p as P,u as R,b as $,e as T,f as j,g as L,r as g,t as e,h as r,i as t,w as s,n as y,j as o,k as C,l as x,m as A,q as D}from"./index-8b44b1d9.js";import{u as E}from"./useBasicLayout-938ba7cd.js";import{_ as H}from"./_plugin-vue_export-helper-c27b6911.js";const Q="/assets/qrcode-d818f08f.jpeg",F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},G=_("path",{d:"M256 480a80.09 80.09 0 0 0 73.3-48H182.7a80.09 80.09 0 0 0 73.3 48z",fill:"currentColor"},null,-1),J=_("path",{d:"M400 288v-60.53C400 157 372.64 95.61 304 80l-8-48h-80l-8 48c-68.88 15.61-96 76.76-96 147.47V288l-48 64v48h384v-48z",fill:"currentColor"},null,-1),K=[G,J],O=w({name:"NotificationsSharp",render:function(u,m){return b(),S("svg",F,K)}});function W(a){return P({url:"/verify",data:{invitationCode:a}})}const X=a=>(A("data-v-5474a7fd"),a=a(),D(),a),Y={class:"login h-full w-full p-3"},Z=X(()=>_("img",{alt:"",class:"qrCode",src:Q},null,-1)),ee=w({__name:"index",setup(a){const{isMobile:u}=E(),m=R(),d=$(),f=T(),k=j(),I=L(),v=g(null),n=g({name:"",invitationCode:""}),q={name:{required:!0,trigger:["blur","input"],message:e("setting.namePlaceholder")},invitationCode:{required:!0,trigger:["blur","input"],message:e("setting.invitationCodePlaceholder")}},B=i=>{I.updateUserInfo(i),d.success(e("common.verifySuccess"))},N=()=>{var i;(i=v.value)==null||i.validate(async l=>{if(l)d.error("验证失败");else{f.start();try{await W(n.value.invitationCode),B({name:n.value.name}),k.setToken(n.value.invitationCode),m.push("/chat")}catch(c){d.error(c.msg)}finally{f.finish()}}})};return(i,l)=>{const c=r("n-input"),h=r("n-form-item"),U=r("n-form"),V=r("NIcon"),z=r("n-tag"),M=r("n-button");return b(),S("div",Y,[Z,t(U,{ref_key:"formRef",ref:v,model:n.value,rules:q,style:y({width:o(u)?"100%":"600px"}),"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:s(()=>[t(h,{label:`${o(e)("setting.name")}:`,path:"name"},{default:s(()=>[t(c,{value:n.value.name,"onUpdate:value":l[0]||(l[0]=p=>n.value.name=p),placeholder:o(e)("setting.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(h,{label:`${o(e)("setting.invitationCode")}:`,path:"invitationCode"},{default:s(()=>[t(c,{value:n.value.invitationCode,"onUpdate:value":l[1]||(l[1]=p=>n.value.invitationCode=p),placeholder:o(e)("setting.invitationCodePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","style"]),t(z,{bordered:!1,class:"qrCodeText",round:"",size:"small",type:"success"},{icon:s(()=>[t(V,null,{default:s(()=>[t(o(O))]),_:1})]),default:s(()=>[C(x(o(e)("setting.QRCode"))+" ",1)]),_:1}),t(M,{style:y({width:o(u)?"70%":"300px"}),type:"primary",onClick:N},{default:s(()=>[C(x(o(e)("common.verify")),1)]),_:1},8,["style"])])}}});const ae=H(ee,[["__scopeId","data-v-5474a7fd"]]);export{ae as default};
